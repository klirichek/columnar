# configured imports, add more here; avoid to add anything apart this block
SET ( GIT_TIMESTAMP_ID "@GIT_TIMESTAMP_ID@" )
SET ( GIT_COMMIT_ID "@GIT_COMMIT_ID@" )
SET ( TAG "@BUILD_TAG@" ) # like 'my-super-puper-ver' or 'release'
SET ( SUFFIX "@CPACK_SUFFIX@") # atogen, like '-osx' or '-rhel7'
SET ( DISTR_SUFFIX "@DISTR_SUFFIX@" ) # like ~trusty_amd64, no- prefixed
SET ( VERSION_STR "@VERSION_STR@" )
SET ( ENV{SOURCE_DATE_EPOCH} @SOURCE_DATE_EPOCH@ ) # that makes builds reproducable

SET ( CPACK_PACKAGE_VERSION "${VERSION_STR}-${GIT_TIMESTAMP_ID}-${GIT_COMMIT_ID}" )

SET ( FULL_VERSION "${CPACK_PACKAGE_VERSION}" )
string ( TOLOWER "${CPACK_PACKAGE_NAME}" CPACK_PACKAGE_NAME_LOWERCASE )

if ( TAG )
	SET ( FULL_VERSION "${FULL_VERSION}-${TAG}" )
endif ()

SET ( FULL_VERSION "${FULL_VERSION}${SUFFIX}${DISTR_SUFFIX}" )

if ( ${CPACK_GENERATOR} STREQUAL "DEB" )
	SET ( CPACK_PACKAGE_FILE_NAME "${CPACK_PACKAGE_NAME_LOWERCASE}_${FULL_VERSION}" )
	set(CPACK_DEBIAN_FILE_NAME "${CPACK_PACKAGE_FILE_NAME}.deb")
else()
	SET ( CPACK_PACKAGE_FILE_NAME "${CPACK_PACKAGE_NAME_LOWERCASE}-${FULL_VERSION}" )
endif()

# rpm specific (used inside .spec template)
SET ( CPACK_RPM_PACKAGE_VERSION "${VERSION_STR}-${GIT_TIMESTAMP_ID}.${GIT_COMMIT_ID}" )
