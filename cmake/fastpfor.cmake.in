cmake_minimum_required ( VERSION 3.17 )

project ( fastpfor-cache NONE )

include ( ExternalProject )

ExternalProject_Add ( FastPFOR
		URL ${LIB_LOCATION}
		PATCH_COMMAND "${CMAKE_COMMAND}" -E copy_if_different ${CMAKE_SOURCE_DIR}/libfastpfor/CMakeLists.txt ${LIB_SRC}/
		SOURCE_DIR ${LIB_SRC}
		BUILD_COMMAND "${CMAKE_COMMAND}" -E echo "Starting build"
		COMMAND "${CMAKE_COMMAND}" --build . --config relwithdebinfo
		COMMAND "${CMAKE_COMMAND}" --build . --config release
		COMMAND "${CMAKE_COMMAND}" --build . --config debug
		INSTALL_COMMAND "${CMAKE_COMMAND}" -E echo "Starting install"
		COMMAND "${CMAKE_COMMAND}" --install . --config relwithdebinfo --prefix "${LIB_BUILD}"
		COMMAND "${CMAKE_COMMAND}" --install . --config release --prefix "${LIB_BUILD}"
		COMMAND "${CMAKE_COMMAND}" --install . --config debug --prefix "${LIB_BUILD}"
		TEST_COMMAND ""
		)
# file configured from cmake/fastpfor.cmake.in